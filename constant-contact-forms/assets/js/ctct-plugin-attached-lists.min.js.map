{"version":3,"file":"./ctct-plugin-attached-lists.min.js","mappings":"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","sources":["webpack://constant-contact-forms/./assets/js/ctct-plugin-attached-lists/attached-lists.js","webpack://constant-contact-forms/webpack/bootstrap","webpack://constant-contact-forms/webpack/runtime/compat get default export","webpack://constant-contact-forms/webpack/runtime/define property getters","webpack://constant-contact-forms/webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["/**\n * Add the drag and drop and sort functionality to the Tiered Template admin\n */\nwindow.CMBAP = window.CMBAP || {};\n\n( function( window, document, $, app, undefined ) {\n\n\tapp.$ = {};\n\n\tapp.cache = function() {\n\t\tlet $wrap            = $( '.attached-posts-wrap' );\n\t\tapp.$.retrievedPosts = $wrap.find( '.retrieved' );\n\t\tapp.$.attachedPosts  = $wrap.find( '.attached' );\n\t};\n\n\tapp.init = function() {\n\t\tapp.cache();\n\n\t\t// Allow the user to drag items from the left list\n\t\tapp.makeDraggable();\n\n\t\t// Allow the right list to be droppable and sortable\n\t\tapp.makeDroppable();\n\n\t\t$( '.cmb2-wrap > .cmb2-metabox' )\n\t\t\t// Add posts when the plus icon is clicked\n\t\t\t.on( 'click', '.attached-posts-wrap .retrieved .add-remove', app._moveRowToAttached )\n\t\t\t// Remove posts when the minus icon is clicked\n\t\t\t.on( 'click', '.attached-posts-wrap .attached .add-remove', app._removeRowFromAttached )\n\t\t\t// Listen for search events\n\t\t\t.on( 'keyup', '.attached-posts-wrap input.search', app._handleFilter )\n\t\t\t.on( 'click', '.cmb-type-custom-attached-posts .cmb-td .cmb2-attached-posts-search-button', app._openSearch );\n\n\t\t$( document.body ).on( 'click', '.ui-find-overlay', app.closeSearch );\n\t};\n\n\tapp.makeDraggable = function() {\n\t\t// Allow the user to drag items from the left list\n\t\tapp.$retrievedPosts().draggable({\n\t\t\thelper: 'clone',\n\t\t\trevert: 'invalid',\n\t\t\tstack: '.retrieved li',\n\t\t\tstop: app.replacePlusIcon,\n\t\t});\n\t};\n\n\tapp.makeDroppable = function() {\n\t\tapp.$.attachedPosts.droppable({\n\t\t\taccept: '.retrieved li',\n\t\t\tdrop: function(evt, ui) {\n\t\t\t\tapp.buildItems( ui.draggable );\n\t\t\t}\n\t\t}).sortable({\n\t\t\tstop: function( evt, ui ) {\n\t\t\t\tapp.resetItems( ui.item );\n\t\t\t}\n\t\t}).disableSelection();\n\t};\n\n\t// Clone our dragged item\n\tapp.buildItems = function( item ) {\n\t\tlet $wrap  = $( item ).parents( '.attached-posts-wrap' );\n\t\t// Get the ID of the item being dragged\n\t\tlet itemID = item[0].attributes[0].value;\n\n\t\t// If our item is in our post ID array, stop\n\t\tif ( app.inputHasId( $wrap, itemID ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Add the 'added' class to our retrieved column when clicked\n\t\t$wrap.find( '.retrieved li[data-id=\"'+ itemID +'\"]' ).addClass( 'added' );\n\n\t\titem.clone().appendTo( $wrap.find( '.attached' ) );\n\n\t\tapp.resetAttachedListItems( $wrap );\n\t};\n\n\t// Add the items when the plus icon is clicked\n\tapp._moveRowToAttached = function() {\n\t\tapp.moveRowToAttached( $( this ).parent() );\n\t};\n\n\t// Move Post to Attached column.\n\tapp.moveRowToAttached = function( $li ) {\n\t\tif ($li.hasClass('added')) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet itemID = $li.data( 'id' );\n\t\tlet $wrap  = $li.parents( '.attached-posts-wrap' );\n\n\t\t// If our item is in our post ID array, stop\n\t\tif ( app.inputHasId( $wrap, itemID ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Add the 'added' class when clicked\n\t\t$li.addClass( 'added' );\n\n\t\t// Add the item to the right list\n\t\t$wrap.find( '.attached' ).append( $li.clone() );\n\n\t\tapp.resetAttachedListItems( $wrap );\n\t};\n\n\t// Remove items from our attached list when the minus icon is clicked\n\tapp._removeRowFromAttached = function() {\n\t\t// Get the clicked item's ID\n\t\tapp.removeRowFromAttached( $(this).closest( 'li' ) );\n\t};\n\n\t// Remove items from our attached list when the minus icon is clicked\n\tapp.removeRowFromAttached = function( $li ) {\n\t\tlet itemID = $li.data( 'id' );\n\t\tlet $wrap  = $li.parents( '.attached-posts-wrap' );\n\n\t\t// Remove the list item\n\t\t$li.remove();\n\n\t\t// Remove the 'added' class from the retrieved column\n\t\t$wrap.find('.retrieved li[data-id=\"' + itemID +'\"]').removeClass('added');\n\n\t\tapp.resetAttachedListItems( $wrap );\n\t};\n\n\tapp.inputHasId = function( $wrap, itemID ) {\n\t\tlet $input  = app.getPostIdsInput( $wrap );\n\t\t// Get array\n\t\tlet postIds = app.getPostIdsVal( $input );\n\t\t// If our item is in our post ID array, stop everything\n\t\treturn $.inArray( itemID, postIds) !== -1;\n\t};\n\n\tapp.getPostIdsInput = function( $wrap ) {\n\t\treturn $wrap.find('.attached-posts-ids');\n\t};\n\n\tapp.getPostIdsVal = function( $input ) {\n\t\tlet val = $input.val();\n\t\treturn val ? val.split( ',' ) : [];\n\t};\n\n\tapp.resetAttachedListItems = function( $wrap ) {\n\t\tlet $input = app.getPostIdsInput( $wrap );\n\t\tlet newVal = [];\n\n\t\t$wrap.find( '.attached li' ).each( function( index ) {\n\t\t\tlet zebraClass = 0 === index % 2 ? 'odd' : 'even';\n\t\t\tnewVal.push( $(this).attr( 'class', zebraClass + ' ui-sortable-handle' ).data( 'id' ) );\n\t\t});\n\n\t\t// Replace the plus icon with a minus icon in the attached column\n\t\tapp.replacePlusIcon();\n\n\t\t$input.val( newVal.join( ',' ) );\n\t};\n\n\t// Re-order items when items are dragged\n\tapp.resetItems = function( item ) {\n\t\tlet $li = $( item );\n\t\tapp.resetAttachedListItems( $li.parents( '.attached-posts-wrap' ) );\n\t};\n\n\t// Replace the plus icon in the attached posts column\n\tapp.replacePlusIcon = function() {\n\t\t$( '.attached li .dashicons.dashicons-plus' ).removeClass( 'dashicons-plus' ).addClass( 'dashicons-minus' );\n\t};\n\n\t// Handle searching available list\n\tapp._handleFilter = function( evt ) {\n\t\tlet $this = $( evt.target );\n\t\tapp.handleFilter( $this.val() || '', $this.closest( '.column-wrap' ) );\n\t};\n\n\t// Handle searching available list\n\tapp.handleFilter = function( term, $column ) {\n\t\tterm = term ? term.toLowerCase() : '';\n\n\t\t$column.find( 'ul.connected li' ).each( function() {\n\t\t\tlet $el = $(this);\n\n\t\t\tif ( $el.text().toLowerCase().search( term ) > -1 ) {\n\t\t\t\t$el.show();\n\t\t\t} else {\n\t\t\t\t$el.hide();\n\t\t\t}\n\t\t} );\n\t};\n\n\tapp.rowTmpl = function( row ) {\n\t\treturn '<li data-id=\"'+ row.id +'\" class=\"'+ row.class +' ui-draggable ui-draggable-handle\"><span class=\"dashicons dashicons-sort sort\"></span>'+ row.title +'<span class=\"dashicons dashicons-plus add-remove\"></span></li>';\n\t};\n\n\tapp.$retrievedPosts = function() {\n\t\treturn app.$.retrievedPosts.find( 'li' );\n\t};\n\n\tapp.$lastRow = function() {\n\t\tlet $lastRow = app.$retrievedPosts().last();\n\n\t\tif ( ! app.editTitle ) {\n\t\t\tapp.editTitle = $lastRow.find( 'a' ).attr( 'title' );\n\t\t}\n\n\t\treturn $lastRow;\n\t};\n\n\tapp.SearchView = window.Backbone.View.extend({\n\t\tel         : '#find-posts',\n\t\toverlaySet : false,\n\t\t$overlay   : false,\n\t\t$button    : false,\n\n\t\tevents : {\n\t\t\t'keypress .find-box-search:input' : 'maybeStartSearch',\n\t\t\t'keyup #find-posts-input'  : 'escClose',\n\t\t\t'click #find-posts-submit' : 'selectPost',\n\t\t\t'click #find-posts-search' : 'send',\n\t\t\t'click #find-posts-close'  : 'close',\n\t\t},\n\n\t\tinitialize: function() {\n\t\t\tthis.$spinner  = this.$el.find( '.find-box-search .spinner' );\n\t\t\tthis.$input    = this.$el.find( '#find-posts-input' );\n\t\t\tthis.$response = this.$el.find( '#find-posts-response' );\n\t\t\tthis.$overlay  = $( '.ui-find-overlay' );\n\n\t\t\tthis.listenTo( this, 'open', this.open );\n\t\t\tthis.listenTo( this, 'close', this.close );\n\t\t},\n\n\t\tescClose: function( evt ) {\n\t\t\tif ( evt.which && 27 === evt.which ) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t},\n\n\t\tclose: function() {\n\t\t\tthis.$overlay.hide();\n\t\t\tthis.$el.hide();\n\t\t},\n\n\t\topen: function() {\n\t\t\tthis.$response.html('');\n\n\t\t\t// WP, why you so dumb? (why isn't text in its own dom node?)\n\t\t\tthis.$el.show().find( '#find-posts-head' ).html( this.findtxt + '<div id=\"find-posts-close\"></div>' );\n\n\t\t\tthis.$input.focus();\n\n\t\t\tif ( ! this.$overlay.length ) {\n\t\t\t\t$( 'body' ).append( '<div class=\"ui-find-overlay\"></div>' );\n\t\t\t\tthis.$overlay  = $( '.ui-find-overlay' );\n\t\t\t}\n\n\t\t\tthis.$overlay.show();\n\n\t\t\t// Pull some results up by default\n\t\t\tthis.send();\n\n\t\t\treturn false;\n\t\t},\n\n\t\tmaybeStartSearch: function( evt ) {\n\t\t\tif ( 13 === evt.which ) {\n\t\t\t\tthis.send();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tsend: function() {\n\t\t\tthis.$spinner.addClass( 'is-active' );\n\n\t\t\tlet retrieved = app.$retrievedPosts().map( function() {\n\t\t\t\treturn $( this ).data( 'id' );\n\t\t\t} ).get();\n\n\t\t\tlet data = {\n\t\t\t\tps                   : this.$input.val(),\n\t\t\t\taction               : 'find_posts',\n\t\t\t\tsearch_types         : this.types,\n\t\t\t\tcmb_id               : this.cmbId,\n\t\t\t\tgroup_id             : this.groupId,\n\t\t\t\tfield_id             : this.fieldId,\n\t\t\t\texclude              : this.exclude,\n\t\t\t\tretrieved            : retrieved,\n\t\t\t\t_ajax_nonce          : $( '#find-posts #_ajax_nonce' ).val(),\n\t\t\t\tcmb2_attached_search : true,\n\t\t\t};\n\n\t\t\t$.post( app.ajaxurl, data )\n\t\t\t\t.always( this.hideSpinner.bind( this ) )\n\t\t\t\t.done( this.ajaxSuccess.bind( this ) )\n\t\t\t\t.fail( this.ajaxFail.bind( this ) );\n\t\t},\n\n\t\thideSpinner: function() {\n\t\t\tthis.$spinner.removeClass( 'is-active' );\n\t\t},\n\n\t\tajaxSuccess: function( response ) {\n\t\t\tif ( ! response.success ) {\n\t\t\t\tthis.$response.text( this.errortxt );\n\t\t\t}\n\n\t\t\tlet data = response.data.replace( /type=\"radio\"/gi, 'type=\"checkbox\"' );\n\n\t\t\tthis.$response.html( data );\n\t\t},\n\n\t\tajaxFail: function( response ) {\n\t\t\tthis.$response.text( this.errortxt );\n\t\t},\n\n\t\tselectPost: function( evt ) {\n\t\t\tevt.preventDefault();\n\n\t\t\tlet html = '';\n\t\t\tlet $checked = this.$response.find( 'input[type=\"checkbox\"]:checked' );\n\n\t\t\tif ( ! $checked.length ) {\n\t\t\t\tthis.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet $lastRow = app.$lastRow();\n\t\t\tlet nextClass = $lastRow.hasClass( 'even' ) ? 'odd' : 'even';\n\t\t\tlet ids = [];\n\n\t\t\t$checked.each( function() {\n\t\t\t\tids.push( this.value );\n\n\t\t\t\tlet $row = $( this ).parents( '.found-posts' );\n\t\t\t\thtml += app.rowTmpl( {\n\t\t\t\t\ttitle : $row.find( 'label' ).html(),\n\t\t\t\t\tid    : this.value,\n\t\t\t\t\tclass : nextClass\n\t\t\t\t} );\n\n\t\t\t\tnextClass = 'even' === nextClass ? 'odd' : 'even';\n\t\t\t} );\n\n\t\t\tif ( html ) {\n\t\t\t\t$lastRow.after( html );\n\t\t\t\tapp.makeDraggable();\n\n\t\t\t\tthis.moveInserted( ids );\n\t\t\t}\n\n\t\t\tthis.close();\n\t\t},\n\n\t\tmoveInserted: function( ids ) {\n\t\t\t// This delay is only for dramatic effect,\n\t\t\t// as otherwise it appears nothing happened.\n\t\t\tsetTimeout( function() {\n\t\t\t\tfor ( var i = 0; i <= ids.length; i++ ) {\n\t\t\t\t\tapp.moveRowToAttached( app.$retrievedPosts().filter( '[data-id=\"'+ ids[i] +'\"]' ) );\n\t\t\t\t}\n\t\t\t}, 500 );\n\t\t},\n\n\n\t});\n\n\tapp.search = new app.SearchView();\n\n\tapp.closeSearch = function() {\n\t\tapp.search.trigger( 'close' );\n\t};\n\n\tapp._openSearch = function( evt ) {\n\t\tapp.openSearch( $( evt.currentTarget ) );\n\t};\n\n\tapp.openSearch = function( $button ) {\n\t\tapp.search.$button = $button;\n\n\t\t// Setup our variables from the field data\n\t\t$.extend( app.search, app.search.$button.data( 'search' ) );\n\n\t\tapp.search.trigger( 'open' );\n\t};\n\n\t$( app.init );\n\n} )( window, document, jQuery, window.CMBAP );\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }"],"names":["window","CMBAP","document","$","app","cache","$wrap","retrievedPosts","find","attachedPosts","init","makeDraggable","makeDroppable","on","_moveRowToAttached","_removeRowFromAttached","_handleFilter","_openSearch","body","closeSearch","$retrievedPosts","draggable","helper","revert","stack","stop","replacePlusIcon","droppable","accept","drop","evt","ui","buildItems","sortable","resetItems","item","disableSelection","parents","itemID","attributes","value","inputHasId","addClass","clone","appendTo","resetAttachedListItems","moveRowToAttached","this","parent","$li","hasClass","data","append","removeRowFromAttached","closest","remove","removeClass","$input","getPostIdsInput","postIds","getPostIdsVal","inArray","val","split","newVal","each","index","zebraClass","push","attr","join","$this","target","handleFilter","term","$column","toLowerCase","$el","text","search","show","hide","rowTmpl","row","id","class","title","$lastRow","last","editTitle","SearchView","Backbone","View","extend","el","overlaySet","$overlay","$button","events","initialize","$spinner","$response","listenTo","open","close","escClose","which","html","findtxt","focus","length","send","maybeStartSearch","retrieved","map","get","ps","action","search_types","types","cmb_id","cmbId","group_id","groupId","field_id","fieldId","exclude","_ajax_nonce","cmb2_attached_search","post","ajaxurl","always","hideSpinner","bind","done","ajaxSuccess","fail","ajaxFail","response","success","errortxt","replace","selectPost","preventDefault","$checked","nextClass","ids","$row","after","moveInserted","setTimeout","i","filter","trigger","openSearch","currentTarget","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","call"],"sourceRoot":""}